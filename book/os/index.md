# 操作系统

## 进程管理

- 进程与线程
    - 什么是进程
    - 进程状态
    - 进程描述
    - 进程控制
    - 进程和线程
    - 线程分类
    - 多核和多线程
- 互斥与同步
    - 并发的原理
    - 互斥
    - 信号量
    - 管程
    - 消息传递
    - 读写问题
- 死锁与饥饿
    - 死锁原理
    - 死锁预防
    - 死锁避免
    - 死锁检测

### 死锁

**死锁原理**

`死锁的概念`
> 由于竞争资源货通信关系，两个或更多线程在执行中出现，永远相互等待只能由其他进程引发的事件

**出现死锁的必要条件**
- 互斥: 任何时刻只能有一个进程使用一个资源实例
- 持有并等待: 进程保持至少一个资源，并在等待获取其他进程持有的资源
- 非抢占: 资源只能在进程使用后资源释放
- 循环等待

**死锁处理方法**

`死锁预防`

> 确保系统永远不会进入死锁状态

- 互斥: 把互斥的共享资源封装成可以同时访问
- 持有并等待: 仅允许进程在开始执行时 一次申请所有所需资源 (资源利用效率较低)
- 非抢占: 如进程请求不能立即分配的资源，则释放已占有资源
- 循环等待: 对资源排序，要求进程按顺序请求资源


`死锁避免`
> 在使用前进行判断，只允许不会出现死锁的进程请求资源

- 利用额外的先验信息，在分配时判断是否会出现死锁，只在不会死锁时分配资源
- 要求进程声明需要资源的最大数目
- 限定提供与分配的资源数量，确保满足进程的最大需求
- 动态检查资源分配状态，确保不会出现循环等待

`死锁检测和恢复`

> 在检测到运行系统进入死锁状态后，进行恢复

通常由应用进程处理死锁, 操作系统忽略死锁: 大部分操作系统(包括UNIX)

### 银行家算法 (死锁避免)

> 银行家算法是一个避免死锁产生的算法，以优惠借贷分配策略为基础，判断并保证系统处于安全状态

- 客户在第一次申请贷款时，声明所需最大资金量，在满足所有贷款要求并完成项目时，及时归还
- 在客户贷款数量不超过银行拥有的最大值时，银行家尽量满足客户需求

### 死锁检测算法

- 允许系统进入死锁状态
- 维护系统的资源分配图
- 定期调用死锁检测算法来搜索图中是否存在死锁
- 出现死锁时，用死锁恢复机制进行恢复

### 进程通信 IPC

- 进程通信时进程进行通信和同步的机制
- IPC提供2个基本操作: 发送操作: send(message) 接收操作: receive(message)
- 进程通信流程
    - 在通信进程间建立通信链路
    - 通过 send/receive 交换消息
- 进程链路特征
- 物理实现: 共享内存，硬件总线
- 逻辑: 逻辑属性

**通信方式**

- 间接通信: 通过操作系统的消息队列 进行消息的传输
    通信流程:
    - 创建一个新的消息队列
    - 通过消息队列发送和接收消息
    - 销毁消息队列
- 直接通信: 在两个进程之间建立共享信道

**阻塞与非阻塞通信**

- 进程通信可划分为 阻塞(同步)或非阻塞(异步)
- 阻塞通信:
    - 发送者发送消息后进入等待，直到接收者成功收到
    - 接收者在请求接收消息后进入等待，直到成功收到一个消息
- 非阻塞通信
    - 发送者发出消息后，可立即进行其他操作
    - 没有消息发送时，接收者在请求接收消息后，接收不到任何消息

**通信链路缓冲

`进程发送的消息在链路上可能有3种缓冲方式`
- 0 容量: 发送方必须等待接收方
- 有限容量: 通信链路缓冲队列满时，发送方必须等待
- 无限容量: 发送方不需要等待

## 处理器调度

- 长程调度
- 中程调度
- 短程调度
- 调度算法
- 虚拟内存

## 磁盘IO

- IO设备
- IO缓冲
- 磁盘调度

## 内存管理

- 内存分区
- 分页
- 分段
- 安全问题
- 内存管理
- 虚拟内存

## 文件系统

- 文件和文件系统
- 文件组织和访问
- B树
- 文件目录
- 文件共享
- 文件系统安全

## 计算机安全

- 计算机安全概念
- 入侵者
- 病毒、蠕虫与僵尸
- Rootkit
- 访问控制
- 入侵检测
- 恶意软件防御
- 处理缓冲区溢出攻击


## 分布式系统

- 面向服务的体系结构
- 分布式消息传递
- 远程过程调用
- 集群

